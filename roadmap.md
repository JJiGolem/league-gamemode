# League TDM script

based on the GTAV multiplayer [RAGE-MP](http://rage.mp/)

# План

1. Реализовать жизненный цикл раунда (6/6) [+]
2. Реализовать статистику (4/4) [+]
3. Реализовать выбор команды (12/15)
4. Реализовать конфигурацию выбора команды, статистики, раунда (5/5) [+]
5. Реализовать UI на Vue или React, используя material design (2/6) [+]
6. Реализовать голосование за карту (5/5)
7. Реализовать режим просмотра за игроком
8. Реализовать HUD (0/20)
9. Реализовать интерфейс для set/get variable между клиентом и сервером (11/12)
10. Чат игроков (0/1)
11. Эффекты (0/9)
12. Механики (0/14)
13. Реализовать таблицу игровой статистики (3/4)

# 1. Реализовать жизненный цикл раунда [+]

1. Событие начала раунда `onRoundStart` [+]
  1.1. Установка таймера окончания [+] 
  1.2. Подгрузка карты [+]
  1.3. Перемещение игроков на заданные позииции карты [+]
  1.4. Создать ботов и протестировать события раунда (серверные Peds еще не готовы, реализация ботов на клиенте пока не приоритетна) [+]
  1.5 Протестировать события раунда с другим игроком [+]

# 2. События об окончании раунда TDM (Team deathmatch mode) `onRoundEnd` [+]
1. `onRoundEnd` - событие, происходящее по окончанию таймера [+]
  1.1. Очищение статистики текущего раунда, запись ее в хранилище [+]
  1.2. Перемещение игроков в лобби [+] 
2. `onPlayerDeath` - событие, происходящее когда кто-либо из игрокоров, которые еще находясь в раунде, умирают. Если
умирают все игроки из одной команды, то закончить раунд [+]

# 3. Реализовать выбор команды
1. Продумать реализацию на стороне сервера, на стороне клиента, исходящие события и события которые это затронут [+]
1.1. Сцена с выбором команды: Событие onPlayerJoin [+]
1.2. Сцена с выбором команды: F4 после смерти [+]
1.3. Сцена с выбором команды: /teamchange [+]
1.4. Сцена с выбором команды: Из игрового меню
1.5. Сцена выбора команды
  1.5.1. Игроку меняют камеру, где создаются педы N команд, где N число из конфига [+]
  1.5.2. Элементы управления [+]
    1.5.2.1. Кнопки влево, право или A, D или кнопки на экране - Сменить команду [+]
    1.5.2.2. Клавиша enter или кнопка на экране - Применить выбор [+]
    1.5.2.3. Кнопки вверх, вниз или W, D или кнопки на экране - Сменить скин текущей команды [+]
  1.5.3. Как только игрок выбрал команду, происходит следующее [+]
    1.5.3.1. Игрока спавнит в лобби [+]
    1.5.3.2. Игроку проставляются игровые статусы, позволяющие ему участвовать в матче [+]
  1.6. С учетом пунктов 1.5, реализовать графический интерфейс

# 4. Реализовать конфигурацию выбора команды, статистики, раунда [+]
1. Конфигурация команды [+]
2. Конфигурация статистики [+]
3. Конфигурация раунда [+]
4. Конфигурация оружия [+]
5. Конфигурация лобби [+]

# 5. Реализовать UI на Vue или React, используя material design
1. Выбран React [+]
2. Форма меню выбора оружия [+]
3. Форма выбора карты на голосование
4. Форма игрового меню
5. Форма админ меню
6. Форма создания новой карты (по точкам)
7. Форма игровой статистики [+]

# 6. Реализовать голосование за карту
1. Голосовать могут пользователи со статусом IDLE [+]
2. Голосование может быть только если раунд не запущен [+]
3. Время на голосование должно быть конфигурируемым [+]
4. При равных процентах побеждает рандом [+]
5. Всего номинировать можно не более N вариантов, где N берется из конфигурации [+]
6. Реализовать графическое меню выбора карт
  6.1. Если человек уже проголосовал/номинировал, то сделать для него меню disabled
7. Реализовать графическое отображение счетчика голосования
8. Выводить меню выбора уже номинированных карт для подтверждения голосования
  8.1. Не выводить меню выбора для тех кто уже проголосовал

# 8. Реализовать HUD
1. Отображение названия команды, при выборе персонажа
2. Nametag игроков
  2.1. Цвет хп бара зависит от количества здоровья игрока [+]
  2.2. Цвета ников зависимы от команды
  2.3. Цвет конфигурируем
  2.4. Дистанция отрисовки конфигурируема
3. Отображение наверху счетчика раунда [+]
4. Отображение живых игроков сделать ввиде иконок
  4.1. Каждая иконка игрок
  4.2. Цвет иконки - цвет команды, цвет берется из конфига
5. Отображать счет побед команд
6. Отображать справа сверху голосование за карту
  6.1. Дублировать информацию в чат
  6.2. Диалоговое меню слева, когда кто то номинирует карту
    6.2.1. Пункты диалога - выбор из списка номинируемых
    6.2.2. На против выбора ставится процент проголосовавших
7. Внизу отображается название мода с его версией
8. При убийстве справа сверху рисуется death log
  8.1. Цвета игроков = цвету команду, берется из конфига
  8.2. Показывать с чего убил (иконка/текст)


# 9. Реализовать интерфейс для set/get variable между клиентом и сервером

1. Реализовать прокси, который по изменению customData или sharedData у игрока будет отсылать ее игроку и всем остальным [+]
  1.1. Подумать, нужно ли разделять customData и sharedData [+]
2. Реализовать state [+]
  2.1. Будет иметь следующие статусы [idle, alive, dead, teamselecting] [+]
    2.1.1. idle - игрок в лобби, вне раунда [+]
    2.1.2. alive - игрок в раунде [+]
    2.1.3. dead - игрок мертв, готов переместиться в лобби, либо наблюдать за игроком [+]
    2.1.4. selecting - игрок в меню выбора команды [+]
    2.1.5. spectate - игрок наблюдает за другим игроком
  2.2. Будет ввиде enum, где значение статуса будут цифры [+]
  2.3. state можно будет изменить с помощью PlayerManager [+]
  2.4. Все взаимодействие с customData делать через PlayerManager [+]

# 10. Чат игроков
1. Добавить текстовый чат

# 11. Эффекты
1. При попадании эффект нанесенного урона в виде цифр улетающих от центра наверх
  1.1. Звуковое сопровождение
2. При убийстве воспроизводится эффект убийства
  2.1. Показывается полученный опыт за убийство с припиской exp
  2.2. Цвет желтый, улетает так же наверх
  2.3. Должен отображаться поверх эффекта урона
3. Эффект старта раунда
4. Эффект окончания раунда
5. Эффект смерти

# 12. Механики
1. Добавление в раунд
  1.1. Изменение статуса игрока с [IDLE, SPECTATE] на ALIVE
2. Пауза раунда
  2.1. Проследить за пересозданием таймера окончания раунда
3. Баланс игроков
  3.1. Баланс можно включать/выключать прямо на лету
  3.2. По умолчанию берется значение из конфига
4. Начисление MMR очков
  4.1. Начислять в зависимости от количества игроков
5. Начисление опыта
  5.1. Опыт всегда стабильно растет до 1000, потом происходит lvlup
  5.2. Начислять опыт за победу
  5.3. Начислять опыт за убийство
  5.4. Начислять опыт за серию убийств

# 13. Реализовать таблицу игровой статистики
1. Таблица со счетом, где отображены данные игроков. [+]
2. Отображение счета команд, где каждое очко - выигранный раунд [+]
3. Эту статистику можно обнулять
4. В статистике отображено лвл, количество убийств, смертей, ассистов, нанесенный урон, ммр, пинг [+]